<div class="container"><h1>Submissions</h1><alert ng-repeat="alert in submissions.alerts" type="alert.type">{{alert.msg}}</alert><div class="pb-10 row"><div class="col-xs-2"><a class="btn btn-default" href="#/calculator/{{calcId}}"><i class="fa fa-reply"></i> Back to Calculator</a></div><div class="col-xs-3"><div class="input-group"><span class="input-group-addon"><i class="fa fa-search"></i></span><input type="text" placeholder="Search email" ng-model="search" ng-change="changeSearch()" class="form-control"></div></div><div class="search col-xs-3"><div class="input-group"><span class="input-group-addon">Payment Status</span><select ng-model="paymentStatus" ng-change="changeStatus()" ng-options="status for status in statuses" class="form-control"></select></div></div><div ng-if="submissions.items.length" class="col-xs-2 pull-right"><a type="button" class="btn btn-default" href="http://api.calculoid.com/submissions/{{calcId}}/export?token={{user.token}}"><i class="fa fa-floppy-o"></i> Export Submissions</a></div></div><accordion close-others="true"><accordion-group ng-repeat="submission in submissions.items"><accordion-heading><div ng-click="loadSubmission($index, false)"><span><i class="fa fa-calendar"></i> {{submission.date}}</span> <span ng-if="submission.email">| <i class="fa fa-envelope-o"></i> {{submission.email}}</span> <span ng-if="submission.price">| <i class="fa fa-money"></i> {{submission.price}} {{submission.currency}}</span> <span ng-if="submission.status">| <i ng-if="submission.status !== 'Completed'" class="fa fa-flag-o"></i> <i ng-if="submission.status === 'Completed'" class="fa fa-flag-checkered"></i> {{submission.status}}</span></div></accordion-heading><alert ng-repeat="alert in submission.detail.alerts" type="alert.type">{{alert.msg}}</alert><h3 ng-if="submission.id">Submission</h3><table class="table table-bordered"><tr ng-if="submission.id"><th>Submission ID<td>{{submission.id}}<tr ng-if="submission.date"><th>Submitted at<td>{{submission.date}} <small>(<span am-time-ago="submission.date"></span>)</small><tr ng-if="submission.email"><th>Submitted by<td><a href="mailto:{{submission.email}}">{{submission.email}}</a><tr ng-if="submission.detail.url"><th>Sent from<td><a href="{{submission.detail.url}}" target="_blank">{{submission.detail.url}}</a><tr ng-if="submission.detail.name"><th>Calculator<td>{{submission.detail.name}}<tr ng-if="submission.detail.comment"><th>Comment<td>{{submission.detail.comment}}</table><h3 ng-if="submission.detail.fields">Fields</h3><table class="table table-bordered"><tr ng-if="submission.detail.fields" ng-repeat="field in submission.detail.fields"><th>{{field.name}}<td>{{field.prefix}}{{field.value}}{{field.postfix}}</table><h3 ng-if="submission.detail.payment">Payment</h3><table class="table table-bordered"><tr ng-if="submission.detail.payment.price"><th>Price<td>{{submission.detail.payment.price}} {{submission.detail.payment.currency}}<tr ng-if="submission.detail.payment.status"><th>Status<td>{{submission.detail.payment.status}}<tr ng-if="submission.detail.payment.info"><th>Payment info<td>{{submission.detail.payment.info}}<tr ng-if="submission.detail.payment.paypalEmail"><th>PayPal email<td>{{submission.detail.payment.paypalEmail}}<tr ng-if="submission.detail.payment.paymentGate"><th>Payment Gate<td>{{submission.detail.payment.paymentGate}}</table><h3 ng-if="submission.detail.payment">Payment details</h3><table class="table table-bordered"><tr ng-repeat="(key, value) in submission.detail.payment.details" ng-if="value && key != 'refunds' && key != 'fraud_details' && key != 'metadata' && key != 'object' && key != 'source'"><th>{{key}}<td ng-if="key != 'card' && key != 'source'">{{value}}<td ng-if="key == 'card'"><ul><li ng-repeat="(objectKey, objectValue) in value" ng-if="objectValue"><strong>{{objectKey}}:</strong> {{objectValue}}</li></ul></table><i>{{submission.detailStatus}}</i> <small>(<span am-time-ago="submission.loaded"></span>)</small> <button type="button" class="btn btn-default" ng-click="loadSubmission($index, true)"><i class="fa fa-refresh"></i> Update</button> <button type="button" class="btn btn-danger pull-right" ng-click="deleteSubmission($index, true)" ng-disabled="submission.deleteButtonDisabled"><i class="fa fa-trash-o"></i> Delete <small>{{submission.deleteStatus}}</small></button></accordion-group></accordion><div class="clearfix"></div><div class="text-center"><pagination total-items="submissions.pg.total" page="submissions.pg.current" items-per-page="submissions.pg.limit" max-size="9" class="pagination-sm" boundary-links="true" rotate="false" on-select-page="onGoToPage(page)"></pagination></div><div class="text-center text-muted"><span>total: {{submissions.pg.total}}</span></div></div>